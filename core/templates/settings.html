{% extends 'base.html' %}

{% block title %}Konto Innstillinger{% endblock %}

{% block content %}
<div class="container">
    <h1 class="mt-4">Kontoinnstillinger</h1>

    <!-- Kundeinformasjon -->
    <h2>Oppdater kundeinformasjon</h2>
    <form method="POST">
        {% csrf_token %}
        {{ customer_form.as_p }}
        <button type="submit" class="btn btn-primary">Oppdater informasjon</button>
    </form>

    <!-- Bankkontoer -->
    <h2 class="mt-5">Dine bankkontoer</h2>
    <ul class="list-group">
        {% for account in bank_accounts %}
        <li class="list-group-item">
            {{ account.account_number }} - Saldo: {{ account.balance }}
            <form action="{% url 'delete_bank_account' account.id %}" method="POST" class="d-inline">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger btn-sm">Slett</button>
            </form>
        </li>
        {% empty %}
        <p>Ingen kontoer funnet.</p>
        {% endfor %}
    </ul>

    <!-- Legg til ny konto -->
    <h3 class="mt-4">Legg til ny bankkonto</h3>
    <form method="POST">
        {% csrf_token %}
        {{ bank_account_form.as_p }}
        <button type="submit" name="add_account" class="btn btn-success">Legg til konto</button>
    </form>

    <!-- Adressebok -->
    <h2 class="mt-5">Adressebok</h2>
    <ul class="list-group">
        {% for contact in address_book %}
        <li class="list-group-item">
            {{ contact.account_holder_name }} - Konto: {{ contact.bank_account.account_number }} ({{ contact.nickname }})
            <form action="{% url 'delete_address_book_entry' contact.id %}" method="POST" class="d-inline">
                {% csrf_token %}
                <button type="submit" class="btn btn-danger btn-sm">Slett</button>
            </form>
        </li>
        {% empty %}
        <p>Ingen kontakter funnet.</p>
        {% endfor %}
    </ul>

    <!-- Legg til ny kontakt i adresseboken -->
    <h3 class="mt-4">Legg til ny kontakt i adresseboken</h3>
    <form method="POST">
        {% csrf_token %}
        {{ address_book_form.as_p }}
        <button type="submit" name="add_address_book" class="btn btn-success">Legg til kontakt</button>
    </form>

</div>
{% endblock %}
